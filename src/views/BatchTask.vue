<template>
    <div>
        <h2 style="text-align: center;margin: 20px ">æ‰¹é‡å¯¼å…¥tokenè·å–ç®¡ç†clubä¿¡æ¯å’ŒæŒ–çŸ¿åŠŸèƒ½</h2>
        <div class="demo-image__preview">
            <h4>ä½¿ç”¨è¯´æ˜å’Œç›¸å…³è§£é‡Šï¼š1.æŒ‰ç…§ä¸‹å›¾çš„æ ¼å¼è¾“å…¥çš„;ä¸‹é¢å›¾ç‰‡å¯ä»¥ç‚¹å‡»å›¾ç‰‡æ”¾å¤§</h4>
            <div class="image-container">
                <el-image
                    style="width: 400px; height: 240px;align-items: center"
                    class="centered-image"
                    :src="url"
                    :preview-src-list="srcList">
                </el-image>
            </div>
        </div>
        <div class="input-container">
            <textarea
                    v-model="inputValue"
                    placeholder="åœ¨è¿™é‡Œè¾“å…¥å¤šè¡Œtokenæ•°å€¼ï¼Œä½¿ç”¨åˆ†å·;åˆ†éš”"
                    class="custom-textarea"
            ></textarea>
        </div>
        <div class="button-container">
            <button class="custom-button" @click="goBack()">è¿”å›é¦–é¡µ</button>
            <button @click="handleInput" class="custom-button">è·å–ä¸ªäººä¿¡æ¯</button>
            <button @click="oreFriendtrade_takecoin" class="custom-button">ä¸€é”®æå¸</button>
            <button @click="auto_takecoin" class="custom-button">è‡ªåŠ¨æå¸</button>
            <button @click="oreBooster" class="custom-button">ä¸€é”®ä½¿ç”¨Boosterç¿»å€å¡</button>
            <button @click="oreAutoBooster" class="custom-button">ä¸€é”®è‡ªåŠ¨ä½¿ç”¨Boosterç¿»å€å¡</button>
            <button class="custom-button" @click="startTaskExecution()">å¼€å§‹ä»»åŠ¡æ‰§è¡Œ</button>
            <button class="custom-button" @click="stopTaskExecution()">åœæ­¢ä»»åŠ¡æ‰§è¡Œ</button>
        </div>
        <h2>ç®¡ç†çš„Clubä¿¡æ¯</h2>
        <h4>ä½¿ç”¨è¯´æ˜å’Œç›¸å…³è§£é‡Šï¼š</h4>
        <h4>1ã€é»„è‰²çš„èƒŒæ™¯ä»£è¡¨ç€ä½ ç®¡ç†çš„CLubå¤„äºå¾…æŒ–çŸ¿ã€å¾…é¢†å–å¸çŠ¶æ€</h4>
        <h4>2ã€æ¸©é¦¨æç¤ºï¼šè‡ªåŠ¨åŒ–æŒ–çŸ¿åŠŸèƒ½ï¼Œå¦‚æœå…³é—­äº†é¡µé¢ï¼Œå®šæ—¶ä»»åŠ¡å°±ä¼šå¤±æ•ˆã€‚å°±è¦é‡æ–°æ‰§è¡Œäº†</h4>
        <div class="button-container" >
            <button class="custom-button" @click="userInfo()">åˆ·æ–°Clubä¿¡æ¯</button>
        </div>
        <table>
            <tr>
                <th>åºå·</th>
                <th>åç§°</th>
                <th>è´­ä¹°é’¥åŒ™ID</th>
                <th>ç®¡ç†è€…</th>
                <th>ç­‰çº§</th>
                <th>ä½ æŒæœ‰key</th>
                <th>æœ€é«˜æŒæœ‰key</th>
                <th>å•ä¸ªé’¥åŒ™è´­ä¹°ä»·æ ¼/matic</th>
                <th>æŒ–çŸ¿èƒ½é‡å€¼</th>
                <th>æŒ–çŸ¿çŠ¶æ€</th>
                <th>æŒ–çŸ¿å¼€å§‹æ—¶é—´</th>
                <th>æŒ–çŸ¿ç»“æŸæ—¶é—´</th>
            </tr>
            <tbody>
            <tr v-for="(item,index) in userList" :key="item.id" v-if="item.holdingNum === item.managerOwnKeyNum">
                <td :style="{'background-color': item.workId === 0 ? '#FFF203' : ''}">{{ index+1 }}</td>
                <td><img src="../assets/img/king.jpg" alt='çš‡å† ' class='icon'>{{ item.profile.displayName }}</td>
                <td>{{ item.profile.accountName }}</td>
                <td>{{ item.managerProfile.displayName}}</td>
                <td>
                    <span v-if="item.tierId=== 1"><img src="../assets/img/1.jpg" alt='1çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 2"><img src="../assets/img/2.jpg" alt='2çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 3"><img src="../assets/img/3.jpg" alt='3çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 4"><img src="../assets/img/4.jpg" alt='4çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 5"><img src="../assets/img/5.jpg" alt='5çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 6"><img src="../assets/img/6.jpg" alt='6çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 7"><img src="../assets/img/7.jpg" alt='7çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 8"><img src="../assets/img/8.jpg" alt='8çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 9"><img src="../assets/img/9.jpg" alt='9çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 10"><img src="../assets/img/10.jpg" alt='10çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 11"><img src="../assets/img/11.jpg" alt='11çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 12"><img src="../assets/img/12.jpg" alt='12çº§' class='icon'></span>
                    <span v-else-if="item.tierId=== 13"><img src="../assets/img/13.jpg" alt='13çº§' class='icon'></span>
                </td>
                <td>{{ item.holdingNum }}</td>
                <td>{{ item.managerOwnKeyNum }}</td>
                <td><img src="../assets/img/matic.jpg" alt='é©¬è¹„' class='icon'>{{ item.buyPrice.substring(0, 7) }}</td>
                <td><img src="../assets/img/energy.jpg" alt='èƒ½é‡' class='icon'>{{ item.energy }}</td>
                <td>
                    <span v-if="item.workId === 0 && item.selfWorkProfit === 0">å¾…æŒ–çŸ¿</span>
                    <span v-else-if="item.workId === 0 && item.selfWorkProfit > 0">å¾…é¢†å–å¸</span>
                    <span v-else-if="item.workId === 2">æ¢å¤èƒ½é‡ä¸­...</span>
                    <span v-else-if="item.workId === 1 || item.workId === 3">æŒ–1çº§çŸ¿ä¸­...</span>
                    <span v-else-if="item.workId === 4 || item.workId === 5">æŒ–2çº§çŸ¿ä¸­...</span>
                    <span v-else-if="item.workId === 6 || item.workId === 7">æŒ–3çº§çŸ¿ä¸­...</span>
                    <span v-else-if="item.workId === 8 || item.workId === 9">æŒ–4çº§çŸ¿ä¸­...</span>
                    <span v-else-if="item.workId === 10 || item.workId === 11">æŒ–5çº§çŸ¿ä¸­...</span>
                    <span v-else-if="item.workId === 12 || item.workId === 13">æŒ–6çº§çŸ¿ä¸­...</span>
                    <span v-else-if="item.workId === 14 || item.workId === 15">æŒ–7çº§çŸ¿ä¸­...</span>
                    <span v-else-if="item.workId === 16">æŒ–8çº§çŸ¿ä¸­...</span>
                    <span v-else-if="item.workId === 17">æŒ–9çº§çŸ¿ä¸­...</span>
                    <span v-else-if="item.workId === 18">æŒ–10çº§çŸ¿ä¸­...</span>
                    <span v-else-if="item.workId === 19">æŒ–11çº§çŸ¿ä¸­...</span>
                    <span v-else-if="item.workId === 20">æŒ–12çº§çŸ¿ä¸­...</span>
                    <span v-else>æŒ–çŸ¿ä¸­...</span>
                </td>
                <td>
                    {{formatTime(item.workStartTimestamp)}}
                </td>
                <td>
                    {{formatTime(item.workEndTimestamp)}}
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</template>

<script>
    import token from '../assets/img/token.jpg';
    export default {
        name: "BatchTask",
        data() {
            return {
                url: token, //å›¾ç‰‡è·¯å¾„
                srcList: [token], //å›¾ç‰‡è·¯å¾„
                userList: [],
                userInfoList: [],
                userInfoArray: [],
                tokenList: [],
                userIdArray: [],
                inputValue: '',
                seconds: '',
                timeMap: new Map(),
                title: '',
                token: '',
                userId: '',
                dialogVisible: false,
                intervalId: null,
                tableData: [],
                userMap: new Map(),
                userIdList: []
            }
        },
        created() {
            setInterval(this.handleInput(), 120000); // æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡
        },
        methods: {
            //è·å–ä¸ªäººä¿¡æ¯
            async handleInput() {
                this.tokenList=[];
                this.userInfoList=[];
                this.userIdList=[];
                this.userList=[];
                const outputArray = this.inputValue.split(';').map(item => item.trim()).filter(item => item !== '');
                this.tokenList = outputArray;
                const promises= this.tokenList.map(async token=>{
                    await fetch('https://turnup-uw-test-apiv2.turnup.so/api/v1/portfolio', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            token: token,
                        })
                    }).then(response => response.json())
                        .then(res => {
                            res.data.holding.forEach(e => {
                                this.userMap.set(token,e.userId)
                                this.userIdList.push({userId: e.userId})
                            })
                        });
                });
                await Promise.all(promises);
                this.userInfo();
            },
            //è¿”å›é¦–é¡µ
            goBack(){
                //é¡µé¢è·³è½¬
                this.$router.push({ path: '/lfgMint' });
            },
            //è·å–ä¸ªäººä¿¡æ¯
            userInfo() {
                this.userInfoList=[];
                this.userIdArray=[];
                this.userList=[];
                this.tokenList.forEach(async token=>{
                  await fetch('https://turnup-uw-test-apiv2.turnup.so/api/v1/portfolio', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            token: token,
                        })
                    }).then(response => response.json())
                        .then(res => {
                            res.data.holding.forEach(e => {
                                if (this.userIdList.some(user => user.userId  === e.managerId) && e.holdingNum === e.managerOwnKeyNum ) {
                                    this.userIdArray.push({userId: e.userId});
                                    this.userList.push(e);
                                }
                            })
                        });
                });
                console.log("ç®¡ç†clubçš„ä¿¡æ¯",this.userList)
            },
            //å¼€å§‹æ‰§è¡Œä»»åŠ¡
            startTaskExecution() {
                this.friendtrade_dispatch_detail();
                this.intervalId = setInterval(this.friendtrade_dispatch_detail, 3600000); // æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡
            },
            // åœæ­¢å®šæ—¶ä»»åŠ¡æ‰§è¡Œ
            stopTaskExecution() {
                clearInterval(this.intervalId); // åœæ­¢å®šæ—¶ä»»åŠ¡æ‰§è¡Œ
            },
            //åˆ¤æ–­èƒ½é‡æ˜¯å¦è¶³å¤Ÿ
            isEnergyLess(currentTask) {
                console.log("èƒ½é‡",currentTask.userId)
                if(currentTask.energy<20 && currentTask.tierId===3){
                    console.log(currentTask.energy,"ä»»åŠ¡3");
                    return currentTask.energy < 20;
                }else if(currentTask.energy<35 && currentTask.tierId===4){
                    console.log(currentTask.energy,"ä»»åŠ¡4");
                    return currentTask.energy < 35;
                }else if(currentTask.energy<35 && currentTask.tierId===5){
                    console.log(currentTask.energy,"ä»»åŠ¡5");
                    return currentTask.energy < 35;
                }else if(currentTask.energy<35 && currentTask.tierId===6){
                    console.log(currentTask.energy,"ä»»åŠ¡6");
                    return currentTask.energy < 35;
                }else if(currentTask.energy<35 && currentTask.tierId===7){
                    console.log(currentTask.energy,"ä»»åŠ¡7");
                    return currentTask.energy < 35;
                }else if(currentTask.energy<35 && currentTask.tierId===8){
                    console.log(currentTask.energy,"ä»»åŠ¡8");
                    return currentTask.energy < 35;
                }
            },
            // è‡ªåŠ¨æ”¶çŸ¿
            async automationOreButton(token,userId){
                await fetch('https://turnup-uw-test-apiv2.turnup.so/api/v1/friendtrade_takeworkcoin', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        token: token,
                        employeeId: userId,
                    })
                }).then(response => response.json())
                    .then(res => {
                        console.log("å‡ºåœˆç¤¾åŒºClubğŸ¥‡â€”â€”â€”â€”æ”¶çŸ¿",res)
                    });
            },
            //æ¢å¤èƒ½é‡
            async executeEnergyRecoveryTask(token,e) {
                //æ”¶çŸ¿
                this.automationOreButton(e.userId);
                await fetch('https://turnup-uw-test-apiv2.turnup.so/api/v1/friendtrade_dispatch_emplyees', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        workId: 2,
                        token: token,
                        emplyeeIds: [e.userId],
                    })
                }).then(response => response.json())
                    .then(res => {
                    });
                // æ‰§è¡Œèƒ½é‡å›å¤ä»»åŠ¡çš„é€»è¾‘
                console.log(e.profile.accountName+'æ‰§è¡Œèƒ½é‡å›å¤ä»»åŠ¡');
            },
            //æ‰§è¡ŒæŒ–çŸ¿
            async executeTask(token,user,workId) {
                //æ”¶çŸ¿
                this.automationOreButton(token,user.userId);
                await fetch('https://turnup-uw-test-apiv2.turnup.so/api/v1/friendtrade_dispatch_emplyees', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        emplyeeIds: [user.userId],
                        token: token,
                        workId: workId,
                    })
                }).then(response => response.json())
                    .then(res => {
                        // æ‰§è¡Œå…·ä½“çš„ä»»åŠ¡é€»è¾‘
                        console.log(user.profile.accountName+`æ‰§è¡Œä»»åŠ¡ï¼šworkId ${workId}`+res);
                    });
            },
            //è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡
            autoExecuteTasks(token) {
                for (let i = 0; i < this.userList.length; i++) {
                    const currentTask = this.userList[i];
                    //æ”¶çŸ¿
                    this.automationOreButton(token,currentTask.userId);
                    if (this.isEnergyLess(currentTask)) {
                        this.executeEnergyRecoveryTask(token,currentTask);
                    } else {
                        if (currentTask.tierId >= 4 && this.tasks.find(task => task.workId === 101 && task.clubCount <= 1  && task.token === token )) {
                            // æ‰§è¡Œ4çº§ä»»åŠ¡
                            this.executeTask(token,currentTask,101);
                            console.log(currentTask.profile.accountName+`workIdä¸º101çš„ä»»åŠ¡`);
                        }else if (currentTask.tierId >= 5 && this.tasks.find(task => task.workId === 12 && task.clubCount >= 10  && task.token === token ) || currentTask.tierId >= 5
                            && this.tasks.find(task => task.workId === 11 && task.clubCount <= 10  && task.token === token )) {
                            // æ‰§è¡Œ5çº§ä»»åŠ¡
                            this.executeTask(token,currentTask,11);
                        }else if (currentTask.tierId >= 5 && this.tasks.find(task => task.workId === 11 && task.clubCount >= 10  && task.token === token )|| currentTask.tierId >= 5
                            && this.tasks.find(task => task.workId === 10 && task.clubCount <= 10  && task.token === token )) {
                            // æ‰§è¡Œ5çº§ä»»åŠ¡ï¼Œå‰ææ˜¯5çº§ä»»åŠ¡å·²ç»å æ»¡äº†10ä¸ªclub
                            this.executeTask(token,currentTask,10);
                        }else if (currentTask.tierId >= 4 && this.tasks.find(task => task.workId === 10 && task.clubCount >= 10  && task.token === token )|| currentTask.tierId >= 4
                            && this.tasks.find(task => task.workId === 9 && task.clubCount <= 10  && task.token === token )) {
                            // æ‰§è¡Œ4çº§ä»»åŠ¡ï¼Œå‰ææ˜¯5çº§ä»»åŠ¡å·²ç»å æ»¡äº†10ä¸ªclub
                            this.executeTask(token,currentTask,9);
                        }else if (currentTask.tierId >= 4 && this.tasks.find(task => task.workId === 9 && task.clubCount >= 10  && task.token === token )|| currentTask.tierId >= 4
                            && this.tasks.find(task => task.workId === 8 && task.clubCount <= 10  && task.token === token )) {
                            // æ‰§è¡Œ4çº§ä»»åŠ¡ï¼Œå‰ææ˜¯4çº§ä»»åŠ¡å·²ç»å æ»¡äº†10ä¸ªclub
                            this.executeTask(token,currentTask,8);
                            console.log(currentTask.profile.accountName+`workIdä¸º8çš„ä»»åŠ¡`);
                        }else if (currentTask.tierId >= 3 && this.tasks.find(task => task.workId === 8 && task.clubCount >= 10  && task.token === token )|| currentTask.tierId >= 3
                            && this.tasks.find(task => task.workId === 7 && task.clubCount <= 10  && task.token === token )) {
                            // æ‰§è¡Œ3çº§ä»»åŠ¡ï¼Œå‰ææ˜¯4çº§ä»»åŠ¡å·²ç»å æ»¡äº†10ä¸ªclub
                            this.executeTask(token,currentTask,7);
                            console.log(currentTask.profile.accountName+`workIdä¸º7çš„ä»»åŠ¡`);
                        } else if (currentTask.tierId >= 3 && this.tasks.find(task => task.workId === 7 && task.clubCount >= 10  && task.token === token) || currentTask.tierId >= 3
                            && this.tasks.find(task => task.workId === 6 && task.clubCount <= 10  && task.token === token)) {
                            // æ‰§è¡Œ3çº§ä»»åŠ¡ï¼Œå‰ææ˜¯3çº§ä»»åŠ¡å·²ç»å æ»¡äº†10ä¸ªclub
                            this.executeTask(token,currentTask,6);
                            console.log(currentTask.profile.accountName+`workIdä¸º6çš„ä»»åŠ¡`);
                        } else if (currentTask.tierId >= 2 && this.tasks.find(task => task.workId === 6 && task.clubCount >= 10  && task.token === token) || currentTask.tierId >= 3
                            && this.tasks.find(task => task.workId === 5 && task.clubCount <= 10  && task.token === token)) {
                            // æ‰§è¡Œ2çº§ä»»åŠ¡ï¼Œå‰ææ˜¯3çº§ä»»åŠ¡å·²ç»å æ»¡äº†10ä¸ªclub
                            this.executeTask(token,currentTask,5);
                            console.log(currentTask.profile.accountName+`workIdä¸º5çš„ä»»åŠ¡`);
                        } else if (currentTask.tierId >= 2 && this.tasks.find(task => task.workId === 5 && task.clubCount >= 10  && task.token === token) || currentTask.tierId >= 3
                            && this.tasks.find(task => task.workId === 4 && task.clubCount <= 10  && task.token === token)) {
                            // æ‰§è¡Œ2çº§ä»»åŠ¡ï¼Œå‰ææ˜¯2çº§ä»»åŠ¡å·²ç»å æ»¡äº†10ä¸ªclub
                            this.executeTask(token,currentTask,4);
                            console.log(currentTask.profile.accountName+`workIdä¸º4çš„ä»»åŠ¡`);
                        } else if (currentTask.tierId >= 1 && this.tasks.find(task => task.workId === 4 && task.clubCount >= 10  && task.token === token) || currentTask.tierId >= 3
                            && this.tasks.find(task => task.workId === 3 && task.clubCount <= 10  && task.token === token)) {
                            // æ‰§è¡Œ1çº§ä»»åŠ¡ï¼Œå‰ææ˜¯2çº§ä»»åŠ¡å·²ç»å æ»¡äº†10ä¸ªclub
                            this.executeTask(token,currentTask,3);
                            console.log(currentTask.profile.accountName+`workIdä¸º3çš„ä»»åŠ¡`);
                        } else if (currentTask.tierId >= 1 && this.tasks.find(task => task.workId === 3 && task.clubCount >= 10  && task.token === token) || currentTask.tierId >= 3
                            && this.tasks.find(task => task.workId === 1 && task.clubCount <= 10  && task.token === token)) {
                            // æ‰§è¡Œ1çº§ä»»åŠ¡ï¼Œå‰ææ˜¯2çº§ä»»åŠ¡å·²ç»å æ»¡äº†10ä¸ªclub
                            this.executeTask(token,currentTask,1);
                            console.log(currentTask.profile.accountName+`workIdä¸º1çš„ä»»åŠ¡`);
                        } else {
                            console.log(currentTask.profile.accountName+`ä¸èƒ½æ‰§è¡ŒworkIdä¸º${currentTask.workId}çš„ä»»åŠ¡`);
                        }
                    }
                }
            },
            // è·å–æ¯ä¸ªç­‰çº§æŒ–çŸ¿å ç”¨çš„clubæ•°é‡
            friendtrade_dispatch_detail() {
                this.tasks=[];
                this.userMap.forEach(async (userId, token) => {
                    for(let workId=12;workId>0;workId--){
                        await fetch('https://turnup-uw-test-apiv2.turnup.so/api/v1/friendtrade_dispatch_detail', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                token: token,
                                emplyeeIds: [userId],
                                workId: workId,
                            })
                        }).then(response => response.json())
                            .then(res => {
                                if (!res.data.isLocked && res.data.canUnlock) {
                                    this.tasks.push({token:token,clubCount:res.data.curWorkingEmployeeNum,
                                        workId:res.data.workId});
                                }
                            });
                    }
                    await fetch('https://turnup-uw-test-apiv2.turnup.so/api/v1/friendtrade_dispatch_detail', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            token: token,
                            emplyeeIds: [userId],
                            workId: 101,
                        })
                    }).then(response => response.json())
                        .then(res => {
                            if (!res.data.isLocked && res.data.canUnlock) {
                                this.tasks.push({token:token,clubCount:res.data.curWorkingEmployeeNum,
                                    workId:res.data.workId});
                            }
                        });
                    console.log(token,this.tasks)
                    //è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡
                    this.autoExecuteTasks(token);
                });
                //åˆ·æ–°ç®¡ç†çš„clubä¿¡æ¯
                this.handleInput();
            },
            //ä¸€é”®ä½¿ç”¨Boosterç¿»å€å¡
            oreBooster() {
                this.tokenList.forEach(async token=>{
                    await fetch('https://turnup-uw-test-apiv2.turnup.so/api/v1/friendtrade_boost_claimcoin', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            token: token,
                        })
                    }).then(response => response.json())
                        .then(data => {
                        });
                })
                setTimeout(this.userInfo(),4000) // æå¸å®Œæˆæ›´æ–°ä¸ªäººä¿¡æ¯
            },
            //ä¸€é”®è‡ªåŠ¨ä½¿ç”¨Boosterç¿»å€å¡
            oreAutoBooster() {
                this.oreBooster();
                setInterval(() => {
                    this.tokenList.forEach(async token=>{
                        await fetch('https://turnup-uw-test-apiv2.turnup.so/api/v1/friendtrade_takecoin', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                token: token,
                            })
                        }).then(response => response.json())
                            .then(data => {
                            });
                    })
                    setTimeout(this.userInfo(),4000) // æå¸å®Œæˆæ›´æ–°ä¸ªäººä¿¡æ¯
                },(8 * 60 * 60 * 1000)+2000);
            },
            //ä¸€é”®æå–ä¸ªäººlfgä»£å¸
            oreFriendtrade_takecoin() {
                this.tokenList.forEach(async token=>{
                  await fetch('https://turnup-uw-test-apiv2.turnup.so/api/v1/friendtrade_takecoin', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            token: token,
                        })
                    }).then(response => response.json())
                        .then(data => {
                        });
                })
                setTimeout(this.userInfo(),4000) // æå¸å®Œæˆæ›´æ–°ä¸ªäººä¿¡æ¯
            },
            //è‡ªåŠ¨æå–ä¸ªäººlfgä»£å¸
            auto_takecoin() {
                //ä¸€é”®æå–ä¸ªäººlfgä»£å¸
                this.oreFriendtrade_takecoin();
                setInterval(() => {
                    this.tokenList.forEach(async token=>{
                      await fetch('https://turnup-uw-test-apiv2.turnup.so/api/v1/friendtrade_takecoin', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                token: token,
                            })
                        }).then(response => response.json())
                            .then(data => {
                            });
                    })
                    setTimeout(this.userInfo(),4000) // æå¸å®Œæˆæ›´æ–°ä¸ªäººä¿¡æ¯
                },(60 * 60 * 1000)+2000);
            },
            //å­˜å‚¨ä¸ªäººä¿¡æ¯æ•°ç»„
            updateUserInfoList(userInfo, token) {
                if (userInfo.platformData.platformMap[1] === undefined) {
                    this.userInfoList.push({
                        userId: userInfo.userId,
                        token: token,
                        multiplyCardNum: userInfo.selfData.multiplyCardNum,
                        displayName: userInfo.platformData.defaultName,
                        accountName: userInfo.platformData.defaultName,
                        tierId: userInfo.selfData.tierId,
                        power: userInfo.selfData.power,
                        vCoin: userInfo.selfData.vCoin,
                        claimCoin: userInfo.selfData.claimCoin,
                        points: userInfo.selfData.points,
                        balance: userInfo.selfData.balance.substring(0, 7),
                    });
                } else {
                    this.userInfoList.push({
                        userId: userInfo.userId,
                        token: token,
                        multiplyCardNum: userInfo.selfData.multiplyCardNum,
                        displayName: userInfo.platformData.platformMap[1].displayName,
                        accountName: userInfo.platformData.platformMap[1].accountName,
                        tierId: userInfo.selfData.tierId,
                        power: userInfo.selfData.power,
                        vCoin: userInfo.selfData.vCoin,
                        claimCoin: userInfo.selfData.claimCoin,
                        points: userInfo.selfData.points,
                        balance: userInfo.selfData.balance.substring(0, 7),
                    });
                }
                console.log("ä¸ªäººé›†åˆä¿¡æ¯", this.userInfoList);
            },
            //æ—¶é—´æˆ³è½¬æ¢ æ ¼å¼åŒ–æ—¶åˆ†ç§’
            formatTime(timestamp) {
                if (timestamp <= 0) {
                    return "";
                }

                const date = new Date(timestamp * 1000);

                timestamp--;
                if (timestamp <= 0) {
                    return "";
                } else {
                    return `${String(date.getMonth() + 1).padStart(2, '0')}æœˆ${String(date.getDate()).padStart(2, '0')}æ—¥ ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}:${String(date.getSeconds()).padStart(2, '0')}`;
                }
            }
        }
    }
</script>

<style scoped>
    /deep/ .el-dialog{
        width: 90%!important;
    }
    .input-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        background-color: #f4f4f4;
    }
    .button-container {
        flex-direction: column;
        text-align: center;
        background-color: #f4f4f4;
        padding: 20px;
        border-bottom: 1px solid #ccc;
        border-radius: 5px;
    }
    .image-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 20vh; /* å¯è§†åŒºåŸŸçš„é«˜åº¦ */
        margin: 10px;
    }

    .centered-image {
        max-width: 100%; /* å›¾åƒæœ€å¤§å®½åº¦ä¸ºå®¹å™¨å®½åº¦ */
        max-height: 100%; /* å›¾åƒæœ€å¤§é«˜åº¦ä¸ºå®¹å™¨é«˜åº¦ */
        object-fit: contain; /* å›¾åƒé€‚åº”å®¹å™¨ï¼Œå¹¶ä¿æŒå…¶åŸå§‹çºµæ¨ªæ¯” */
    }

    .custom-textarea {
        width: 1200px;
        height: 150px;
        margin-bottom: 10px;
        padding: 10px;
        font-size: 16px;
        border: 1px solid #999;
        border-radius: 5px;
        resize: none;
    }

    .custom-button {
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        background-color: #007bff;
        color: #fff;
        transition: background-color 0.3s;
    }

    .custom-button:hover {
        background-color: #0056b3;
    }



    /* æŒ‰é’®çš„åŸºæœ¬æ ·å¼ */
    .custom-button {
        padding: 10px 20px;
        font-size: 16px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin: 10px;
    }

    /* æŒ‰é’®çš„æ‚¬åœæ ·å¼ */
    .custom-button:hover {
        background-color: #45a049;
    }
</style>